# 弥生NEXTブリッジ（yayoi-next-bridge）

弥生給与Next のエクスポート出力を、弥生会計Next のインポートで取り込める形式に変換するためのコンバーターです。  
（給与Next と 会計Next の間の “微妙な非互換” を吸収します）

## できること

- 弥生給与Next の出力データを、弥生会計Next で取り込める形式に変換
- 変換処理の実行（CLI / GUI）
- 変換ログの表示・出力（予定）
- 入力ファイルのバリデーション（予定）

## できないこと（スコープ外）

- 会計処理や仕訳ルールの自動生成など、業務判断が必要な処理
- 変換処理を “賢くする” 方向の拡張（AI活用など）
- データの自動アップロード・外部送信

本ツールは **「確実に変換できる」「迷わず使える」** を優先します。

## 想定ユーザー

- 弥生給与Next → 弥生会計Next の連携で困っている人
- 変換作業を手作業で整形していて、毎回時間が溶けている人
- 自動化したいのに手入力を強いられてイライラしている人
- 公式の対応を待っていられない人

## 使い方（CLI）

> コアロジックはCLIで動作します。GUIはこの上に載せるだけの方針です。

### 現状

- 既存の変換ロジックは `reference/` 配下のスクリプトでコマンドライン実行できます。

### 今後の予定

- 既存スクリプトのロジックを参考に、変換コアを整理してリライトします。
- CLIは `--input` / `--output` を基本として提供します。
- ※ `--input` / `--output` の形式は実データに合わせて調整します。

## 使い方（GUI）

準備中です。  
狙いは「社内ツールとして使いやすい最小限のGUI」で、以下を満たすことを目標にしています。

- 入力ファイル選択（ファイル単位 / フォルダ単位）
- 出力先指定
- 実行ボタン
- 進捗・ログ表示
- 失敗時のエラー表示（何が原因か分かる）

### 操作イメージ

- ファイルオープンダイアログでファイル単位、またはフォルダ単位で選択  
  - フォルダ指定の場合は再帰検索オプションあり
- フォルダ指定の場合、弥生給与Nextの出力形式の命名パターンを検索し、一括変換
- 保存ファイルはインポート時の見やすさも考慮し、プレフィックスを付与して保存

GUIは **コアロジックの薄いラッパー** とし、複雑化させない方針です。
GUIは利便性向上のための最小実装に留め、業務ロジックは必ず core に集約します。

## 技術スタック（検討中）

配布の容易さと実装コストのバランスを取りつつ、GUIの複雑化を避ける方針です。

候補：
- Chrome拡張機能
- NiceGUI（Python製GUIフレームワーク）
- FastAPI + 静的サイト（Reactなど）

## 開発方針

- 変換コア（CLI）は安定性を最優先し、GUIから独立させる
- 変換結果の再現性（同じ入力 → 同じ出力）を担保する
- 例外系（入力ミス・形式違い）は “落ち方” を丁寧にする

## ディレクトリ構成（案）

```text
.
├─ yayoi_next_bridge/         # アプリ本体（Pythonパッケージ想定）
│  ├─ core/                   # 変換ロジック
│  ├─ gui/                    # GUI（予定）
│  └─ tests/                  # テスト
├─ reference/                 # 既存スクリプト（参考実装）
└─ README.md

   
```

## テスト（予定）

* サンプル入力に対して、期待される出力になるかの回帰テスト
* エラー系（カラム不足 / 文字コード / フォーマット揺れ）テスト

## ライセンス

MIT License

---

## 免責

本ツールは弥生株式会社の公式ツールではありません。
利用は自己責任でお願いします。
